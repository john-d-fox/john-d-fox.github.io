##-------------------------------------------------------##
##  An R Companion to Applied Regression, 3rd Edition    ##
##   J. Fox and S. Weisberg, Sage Publications           ##
##     Script for Chapter 1, January 10, 2018            ##
##-------------------------------------------------------##

###################################################
### code chunk number 3: chap-1.Rnw:77-82
###################################################
2 + 3 # addition
2 - 3 # subtraction
2*3   # multiplication
2/3   # division
2^3   # exponentiation


###################################################
### code chunk number 4: chap-1.Rnw:88-89
###################################################
4^2 - 3*2


###################################################
### code chunk number 5: chap-1.Rnw:93-94
###################################################
1 - 6 + 4


###################################################
### code chunk number 6: chap-1.Rnw:98-99
###################################################
(4^2) - (3*2)


###################################################
### code chunk number 7: chap-1.Rnw:102-103
###################################################
(4 + 3)^2


###################################################
### code chunk number 8: chap-1.Rnw:106-107
###################################################
4 + 3^2


###################################################
### code chunk number 9: chap-1.Rnw:111-113
###################################################
-2--3
-2 - -3


###################################################
### code chunk number 10: chap-1.Rnw:154-155
###################################################
log(100)


###################################################
### code chunk number 11: chap-1.Rnw:159-160
###################################################
log(100, base=10)


###################################################
### code chunk number 12: chap-1.Rnw:163-164
###################################################
log10(100) # equivalent


###################################################
### code chunk number 13: chap-1.Rnw:171-172
###################################################
log(100, b=10)


###################################################
### code chunk number 14: chap-1.Rnw:283-284
###################################################
args("log")


###################################################
### code chunk number 15: chap-1.Rnw:287-288
###################################################
log(100, 10)


###################################################
### code chunk number 16: chap-1.Rnw:309-310
###################################################
c(1, 2, 3, 4)


###################################################
### code chunk number 17: chap-1.Rnw:313-320
###################################################
1:4 # integer sequence
4:1 # descending
-1:2 # negative to positive
seq(1, 4) # equivalent to 1:4
seq(2, 8, by=2) # specify interval between elements
seq(0, 1, by=0.1) # non-integer sequence
seq(0, 1, length=11) # specify number of elements


###################################################
### code chunk number 18: chap-1.Rnw:324-327
###################################################
c(1, 2, 3, 4)/2
c(1, 2, 3, 4)/c(4, 3, 2, 1)
log(c(0.1, 1, 10, 100), base=10)


###################################################
### code chunk number 19: chap-1.Rnw:331-332
###################################################
c(1, 2, 3, 4) + c(4, 3) # no warning


###################################################
### code chunk number 20: chap-1.Rnw:348-350
###################################################
x <- c(1, 2, 3, 4) # assignment
x # print


###################################################
### code chunk number 21: chap-1.Rnw:361-363
###################################################
x/2  # equivalent to c(1, 2, 3, 4)/2
(y <- sqrt(x))


###################################################
### code chunk number 22: chap-1.Rnw:370-372
###################################################
set.seed(12345)
(x <- rnorm(100))  # 100 standard normal random numbers


###################################################
### code chunk number 23: chap-1.Rnw:400-401
###################################################
summary(x)


###################################################
### code chunk number 24: chap-1.Rnw:408-409
###################################################
(words <- c("To", "be", "or", "not", "to", "be"))


###################################################
### code chunk number 25: chap-1.Rnw:412-413
###################################################
paste(words, collapse=" ")


###################################################
### code chunk number 26: chap-1.Rnw:418-419
###################################################
(logical.values <- c(TRUE, TRUE, FALSE, TRUE))


###################################################
### code chunk number 27: chap-1.Rnw:424-425
###################################################
!logical.values


###################################################
### code chunk number 28: chap-1.Rnw:428-430
###################################################
sum(logical.values)
sum(!logical.values)


###################################################
### code chunk number 29: chap-1.Rnw:435-436
###################################################
c("A", FALSE, 3.0)


###################################################
### code chunk number 30: chap-1.Rnw:439-440
###################################################
c(10, FALSE, -6.5, TRUE)


###################################################
### code chunk number 31: chap-1.Rnw:447-450
###################################################
x[12]             # 12th element
words[2]          # second element
logical.values[3] # third element


###################################################
### code chunk number 32: chap-1.Rnw:454-456
###################################################
x[6:15]       # elements 6 through 15
x[c(1, 3, 5)] # 1st, 3rd, 5th elements 


###################################################
### code chunk number 33: chap-1.Rnw:460-461
###################################################
x[-(11:100)] # omit elements 11 through 100


###################################################
### code chunk number 34: chap-1.Rnw:467-469
###################################################
v <- 1:4
v[c(TRUE, FALSE, FALSE, TRUE)]


###################################################
### code chunk number 35: chap-1.Rnw:510-520
###################################################
1 == 2
1 != 2
1 <= 2
1 < 1:3
3:1 > 1:3
3:1 >= 1:3
TRUE & c(TRUE, FALSE)
c(TRUE, FALSE, FALSE) | c(TRUE, TRUE, FALSE)
TRUE && FALSE
TRUE || FALSE


###################################################
### code chunk number 36: chap-1.Rnw:526-533
###################################################
(z <- x[1:10]) # first 10 elements of x
z < -0.5 # is each element less than -0.5?
z > 0.5  # is each element greater than 0.5
z < -0.5 | z > 0.5  #  < and > are of higher precedence than |
abs(z) > 0.5  # absolute value, equivalent to last expression
z[abs(z) > 0.5] # values of z for which |z| > 0.5
z[!(abs(z) > 0.5)] # values z for which |z| <= 0.5


###################################################
### code chunk number 37: chap-1.Rnw:550-551
###################################################
mean(x)


###################################################
### code chunk number 38: chap-1.Rnw:557-558
###################################################
sum(x)/length(x)


###################################################
### code chunk number 39: chap-1.Rnw:563-566
###################################################
myMean <- function(x){
    sum(x)/length(x)
}


###################################################
### code chunk number 40: chap-1.Rnw:587-592
###################################################
myMean(x)
y # from sqrt(c(1, 2, 3, 4))
myMean(y)
myMean(1:100)
myMean(sqrt(1:100))


###################################################
### code chunk number 41: chap-1.Rnw:600-605
###################################################
mySD <- function(x){
    sqrt(sum((x - myMean(x))^2)/(length(x) - 1))
}
mySD(1:100)
sd(1:100) # check


###################################################
### code chunk number 42: chap-1.Rnw:630-632
###################################################
mySD
myMean


###################################################
### code chunk number 43: chap-1.Rnw:635-637
###################################################
letters
mySD(letters)


###################################################
### code chunk number 44: chap-1.Rnw:825-828
###################################################
library("car3") # load car and carData packages
head(Duncan, n=10)
dim(Duncan)


###################################################
### code chunk number 45: chap-1.Rnw:859-860
###################################################
summary(Duncan)


###################################################
### code chunk number 46: fig1-hist-prestige
###################################################
with(Duncan, hist(prestige))


###################################################
### code chunk number 47: fig1-scatterplot-matrix-Duncan
###################################################
scatterplotMatrix( ~ prestige + education + income, 
    id=list(n=3), data=Duncan)


###################################################
### code chunk number 48: chap-1.Rnw:916-917
###################################################
(duncan.model <- lm(prestige ~ education + income, data=Duncan))


###################################################
### code chunk number 49: chap-1.Rnw:924-925
###################################################
summary(duncan.model)


###################################################
### code chunk number 50: fig1-rstudent-density-plot
###################################################
densityPlot(rstudent(duncan.model))


###################################################
### code chunk number 51: chap-1.Rnw:959-960
###################################################
set.seed(12345)


###################################################
### code chunk number 52: fig1-rstudent-qq-plot
###################################################
qqPlot(duncan.model, id=list(n=3))


###################################################
### code chunk number 53: chap-1.Rnw:976-977
###################################################
outlierTest(duncan.model)


###################################################
### code chunk number 54: fig1-influence-plot
###################################################
influenceIndexPlot(duncan.model, vars=c("Cook", "hat"), 
    id=list(n=3))


###################################################
### code chunk number 55: fig1-av-plots
###################################################
avPlots(duncan.model, 
    id=list(cex=0.75, n=3, method="mahal"))


###################################################
### code chunk number 56: fig1-cr-plots
###################################################
crPlots(duncan.model, smooth=list(span=0.7))


###################################################
### code chunk number 57: fig1-spread-level-plot
###################################################
spreadLevelPlot(duncan.model)


###################################################
### code chunk number 58: chap-1.Rnw:1033-1035
###################################################
ncvTest(duncan.model)
ncvTest(duncan.model, var.formula= ~ income + education)


###################################################
### code chunk number 59: chap-1.Rnw:1041-1044
###################################################
whichNames(c("minister", "conductor"), Duncan)
duncan.model.2 <- update(duncan.model, subset=-c(6, 16))
summary(duncan.model.2)


###################################################
### code chunk number 60: chap-1.Rnw:1050-1051
###################################################
compareCoefs(duncan.model, duncan.model.2)


###################################################
### code chunk number 61: chap-1.Rnw:1121-1122
###################################################
summary(Duncan$type)


###################################################
### code chunk number 62: chap-1.Rnw:1125-1126
###################################################
summary(Duncan$prestige)


###################################################
### code chunk number 63: chap-1.Rnw:1129-1130
###################################################
summary(Duncan)


###################################################
### code chunk number 64: chap-1.Rnw:1133-1134
###################################################
summary(lm(prestige ~ education + income, data=Duncan))


###################################################
### code chunk number 65: chap-1.Rnw:1143-1146
###################################################
class(Duncan$type)
class(Duncan$prestige)
class(Duncan)


###################################################
### code chunk number 66: chap-1.Rnw:1149-1151
###################################################
duncan.model <- lm(prestige ~ education + income, data=Duncan)
class(duncan.model)


###################################################
### code chunk number 67: chap-1.Rnw:1157-1158
###################################################
summary


###################################################
### code chunk number 68: chap-1.Rnw:1171-1172
###################################################
args(summary.lm)


###################################################
### code chunk number 69: chap-1.Rnw:1222-1224
###################################################
mod.mroz <- glm(lfp ~ ., family=binomial, data=Mroz)
class(mod.mroz)


